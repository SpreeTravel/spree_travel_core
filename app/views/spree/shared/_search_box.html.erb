<% active_product = params[:product_type] %>

<div id="search_box" class="">
  <ul id="search_box_tabs" class="nav nav-tabs">
    <% Spree::ProductType.enabled.each do |p| %>
      <%
        prefix = "#{p.name.downcase}_"
        if active_product
          active_class = active_product == p.name.downcase ? 'active' : ''
        else
          active_class = 'active'
          active_product = p.name.downcase
        end
      %>
      <%= content_tag :li, class: "nav-item #{active_class}", role: 'presentation'  do %>
        <a data-toggle="tab" role="tab" class=<%="nav-link #{active_class}"%> href='#<%="#{prefix}"%>fields' name=<%="#{p.name}"%>  >
          <%= p.presentation %>
        </a>
      <% end %>
    <% end %>
  </ul>

  <div id="tabcontent" class="tab-content">
    <% Spree::ProductType.enabled.each do |p| %>
      <% prefix = "#{p.name.downcase}_" %>
      <%= render partial: "spree/shared/#{p.name.to_s}_search_box", locals: {prefix: prefix, p: p,
                                                                             product: @product,
                                                                             active_product: active_product} %>
    <% end %>
  </div>
</div>
<div class="alert alert-success" role="alert">
  For <%= active_product + 's'%> start date is <%= Spree::Product.send("#{active_product}s").first.rates.first.start_date%>
  and end date is <%= Spree::Product.send("#{active_product}s").last.rates.last.end_date %>. Just for 29 days window
</div>